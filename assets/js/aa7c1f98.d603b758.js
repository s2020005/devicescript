"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[980],{35318:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(27378);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(a),d=r,k=c["".concat(s,".").concat(d)]||c[d]||m[d]||l;return a?n.createElement(k,o(o({ref:t},p),{},{components:a})):n.createElement(k,o({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,o[1]=i;for(var u=2;u<l;u++)o[u]=a[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},39798:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(27378),r=a(38944);const l={tabItem:"tabItem_wHwb"};function o(e){let{children:t,hidden:a,className:o}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(l.tabItem,o),hidden:a},t)}},23930:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(25773),r=a(27378),l=a(38944),o=a(83457),i=a(3620),s=a(30654),u=a(70784),p=a(71819);function c(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function m(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??c(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function d(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function k(e){let{queryString:t=!1,groupId:a}=e;const n=(0,i.k6)(),l=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,s._X)(l),(0,r.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(n.location.search);t.set(l,e),n.replace({...n.location,search:t.toString()})}),[l,n])]}function h(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,l=m(e),[o,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:l}))),[s,u]=k({queryString:a,groupId:n}),[c,h]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,l]=(0,p.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:n}),b=(()=>{const e=s??c;return d({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{b&&i(b)}),[b]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),h(e)}),[u,h,l]),tabValues:l}}var b=a(76457);const v={tabList:"tabList_J5MA",tabItem:"tabItem_l0OV"};function g(e){let{className:t,block:a,selectedValue:i,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),m=e=>{const t=e.currentTarget,a=p.indexOf(t),n=u[a].value;n!==i&&(c(t),s(n))},d=e=>{let t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{const a=p.indexOf(e.currentTarget)+1;t=p[a]??p[0];break}case"ArrowLeft":{const a=p.indexOf(e.currentTarget)-1;t=p[a]??p[p.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:o}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>p.push(e),onKeyDown:d,onClick:m},o,{className:(0,l.Z)("tabs__item",v.tabItem,o?.className,{"tabs__item--active":i===t})}),a??t)})))}function y(e){let{lazy:t,children:a,selectedValue:n}=e;const l=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function f(e){const t=h(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",v.tabList)},r.createElement(g,(0,n.Z)({},e,t)),r.createElement(y,(0,n.Z)({},e,t)))}function w(e){const t=(0,b.Z)();return r.createElement(f,(0,n.Z)({key:String(t)},e))}},79551:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>k,frontMatter:()=>i,metadata:()=>u,toc:()=>c});var n=a(25773),r=(a(27378),a(35318)),l=a(23930),o=a(39798);const i={sidebar_position:10,description:"Learn how to set up and use the Development Gateway for DeviceScript, enabling rapid prototyping and deployment on Azure or locally.",keywords:["DeviceScript","Development Gateway","Azure","local deployment","MQTT"]},s="Development Gateway",u={unversionedId:"developer/cloud/gateway",id:"developer/cloud/gateway",title:"Development Gateway",description:"Learn how to set up and use the Development Gateway for DeviceScript, enabling rapid prototyping and deployment on Azure or locally.",source:"@site/docs/developer/cloud/gateway.mdx",sourceDirName:"developer/cloud",slug:"/developer/cloud/gateway",permalink:"/devicescript/developer/cloud/gateway",draft:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10,description:"Learn how to set up and use the Development Gateway for DeviceScript, enabling rapid prototyping and deployment on Azure or locally.",keywords:["DeviceScript","Development Gateway","Azure","local deployment","MQTT"]},sidebar:"tutorialSidebar",previous:{title:"Configuration",permalink:"/devicescript/developer/cloud/configuration"},next:{title:"Packages",permalink:"/devicescript/developer/packages/"}},p={},c=[{value:"Features",id:"features",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Local developement",id:"local-developement",level:2},{value:"Codesandbox.io",id:"codesandboxio",level:2},{value:"MQTT",id:"mqtt",level:2},{value:"Azure deployment (optional)",id:"azure-deployment-optional",level:2},{value:"Provisioning",id:"provisioning",level:3},{value:"Deployment",id:"deployment",level:3},{value:"Cleanup",id:"cleanup",level:3},{value:"Dashboards",id:"dashboards",level:3},{value:"Visual Studio Code extension",id:"visual-studio-code-extension",level:3}],m={toc:c},d="wrapper";function k(e){let{components:t,...i}=e;return(0,r.kt)(d,(0,n.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"development-gateway"},"Development Gateway"),(0,r.kt)("p",null,"DeviceScript defines a ",(0,r.kt)("a",{parentName:"p",href:"/developer/cloud/"},"cloud layer"),"\nto abstract the communication between the device and a cloud provider."),(0,r.kt)("p",null,"In order to facilite rapid prototyping,\nit is possible to run a Development Gateway ",(0,r.kt)("strong",{parentName:"p"},"locally"),"\nor deploy it to Azure on top of Azure services."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Full sources at ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/microsoft/devicescript-gateway"},"https://github.com/microsoft/devicescript-gateway"))),(0,r.kt)("h2",{id:"features"},"Features"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Local or Azure deployement"),(0,r.kt)("li",{parentName:"ul"},"Device provisioning, management: register, unregister, list, ..."),(0,r.kt)("li",{parentName:"ul"},"Script management: create, update (versioned)"),(0,r.kt)("li",{parentName:"ul"},"Script deployment: assign a script to a device and the gateway will deploy it"),(0,r.kt)("li",{parentName:"ul"},"Analytics through Azure Monitor"),(0,r.kt)("li",{parentName:"ul"},"JSON messages from and to devices"),(0,r.kt)("li",{parentName:"ul"},"Per-device environment variables"),(0,r.kt)("li",{parentName:"ul"},"Swagger API front end for non-embedded clients"),(0,r.kt)("li",{parentName:"ul"},"Visual Studio Code extension")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"The Development Gateway is a sample and not meant for production deployment.")),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Follow these steps to get started with using the gateway."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"install ",(0,r.kt)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"Node.JS 18+"),"\nand the ",(0,r.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/dotnet/azure/install-azure-cli"},"Azure CLI"),"."),(0,r.kt)("li",{parentName:"ul"},"fork ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/microsoft/devicescript-gateway/"},"https://github.com/microsoft/devicescript-gateway/"))),(0,r.kt)("p",null,"The full sources of the Gateway is available in that repository."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"install the dependencies and pull the submodules")),(0,r.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run setup\n"))),(0,r.kt)(o.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn setup\n"))),(0,r.kt)(o.Z,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm run setup\n")))),(0,r.kt)("h2",{id:"local-developement"},"Local developement"),(0,r.kt)("p",null,"The Development Gateway can be run locally without any cloud resources. This is great for tinkering."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.fastify.io/"},"Node.JS + Fastify")," is a popular web server framework")),(0,r.kt)("mermaid",{value:"stateDiagram-v2\n    web: Fastify server\n    web: (localhost)\n    dev: Device\n    wssk: Web Socket\n    openapi: Open API\n    vscode: VS Code\n    storage: Device Table, Script Blobs\n    storage: Emulated Azure Storage (Azurite)\n    queue: Message Queue\n    queue: Emulated Azure Storage (Azurite)\n    mqtt: MQTT server\n\n    dev --\x3e wssk\n    wssk --\x3e web\n    openapi --\x3e web\n    web --\x3e storage\n    web --\x3e queue\n    web --\x3e mqtt\n    mqtt --\x3e web\n    vscode --\x3e openapi\n"}),(0,r.kt)("p",null,"To get started,"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"launch Azurite, a local Azure storage emulator. Keep this terminal open.")),(0,r.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run azurite\n"))),(0,r.kt)(o.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn azurite\n"))),(0,r.kt)(o.Z,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm run azurite\n")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"launch the local development server")),(0,r.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run dev\n"))),(0,r.kt)(o.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn dev\n"))),(0,r.kt)(o.Z,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm run dev\n")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"open the swagger page, ",(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:7071/swagger/")," and make sure it loads"),(0,r.kt)("li",{parentName:"ul"},"in Visual Studio Code, use the configuration string printed in the console.")),(0,r.kt)("p",null,"Make sure to use the connection string for ",(0,r.kt)("strong",{parentName:"p"},"local network")," to connect to a device on the same local network.\nOtherwise, you can also work on the simulator device using the local host connection string."),(0,r.kt)("p",null,"Device messages are pushed into the ",(0,r.kt)("inlineCode",{parentName:"p"},"messages")," ",(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/storage/queues/storage-queues-introduction"},"Azure Storage Queue")," as a base-64 encoded JSON string.\nYou can use any client library to access those messages."),(0,r.kt)("h2",{id:"codesandboxio"},"Codesandbox.io"),(0,r.kt)("p",null,"Running the local web server from ",(0,r.kt)("a",{parentName:"p",href:"https://codesandbox.io/"},"CodeSandbox.io"),"\nallows you to run the Development Gateway in the cloud, which simplifies many connectivity issues with local networks."),(0,r.kt)("p",null,"The Development Gateway can be run in a browser using ",(0,r.kt)("a",{parentName:"p",href:"https://codesandbox.io/"},"codesandbox.io"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"open ",(0,r.kt)("a",{parentName:"li",href:"https://codesandbox.io/"},"https://codesandbox.io/")),(0,r.kt)("li",{parentName:"ul"},"click on ",(0,r.kt)("strong",{parentName:"li"},"Import repository")),(0,r.kt)("li",{parentName:"ul"},"enter ",(0,r.kt)("inlineCode",{parentName:"li"},"microsoft/devicescript-gateway")," or your forked repository.")),(0,r.kt)("h2",{id:"mqtt"},"MQTT"),(0,r.kt)("p",null,"The gateway can also be used as an MQTT server or a bridge to an existing MQTT server."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"publishMessage"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"subscribeMessage"),' from "@devicescript/cloud" will automatically be bridge to the MQTT server under the topic ',(0,r.kt)("inlineCode",{parentName:"li"},"devs/{deviceId}/(from|to)/{topic}"),"."),(0,r.kt)("li",{parentName:"ul"},"You can override the ",(0,r.kt)("inlineCode",{parentName:"li"},"devs/.../(from|to)/...")," routing scheme by starting your topic with ",(0,r.kt)("inlineCode",{parentName:"li"},"/"),". For example, ",(0,r.kt)("inlineCode",{parentName:"li"},"/mytopic")," will be routed to ",(0,r.kt)("inlineCode",{parentName:"li"},"mytopic"),".")),(0,r.kt)("p",null,"There are ",(0,r.kt)("a",{parentName:"p",href:"https://mqtt.org/software/"},"many options")," to run your own MQTT broker/server. Once you have a server,\nyou can configure the gateway using the ",(0,r.kt)("inlineCode",{parentName:"p"},"DEVS_MQTT_URL")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"DEVS_MQTT_USER")," environment variables or secrets."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'DEVS_MQTT_URL="mqtts://host:post"\nDEVS_MQTT_USER="username:password"\n')),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can use the ",(0,r.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=rpdswtk.vsmqtt"},"VSMqtt")," in Visual Studio Code to connect to the MQTT server\nand publish, subscribe to topics.")),(0,r.kt)("h2",{id:"azure-deployment-optional"},"Azure deployment (optional)"),(0,r.kt)("p",null,"The Development Gateway can be deployed to Azure on top of Azure services:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/app-service/"},"App Service"),", runs a Node.JS web service with a swagger frontend"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/key-vault/"},"Key Vault"),", to store secrets needed by the Web Application"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/storage/"},"Storage"),", blobs and tables to manage devices, scripts and telemetry"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview"},"App Insights"),", to collect telemetry about the health of devices"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/event-hubs/"},"Event Hub")," to forward JSON messages from the device")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"NOTE:"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"Some Azure resources will incur costs to your Azure subscription."))),(0,r.kt)("mermaid",{value:"stateDiagram-v2\n    web: Fastify server\n    dev: Device\n    ai: Telemetry\n    ai: Azure Application Insights\n    kv: Service connection strings\n    kv: Azure Key Vault\n    wssk: Web Socket\n    openapi: Open API\n    web: Azure App Service\n    vscode: VS Code\n    storage: Device Table, Script Blobs\n    storage: Azure Storage\n    messages: Message Queue\n    messages: Azure Event Hub\n\n    dev --\x3e wssk\n    web --\x3e ai\n    web --\x3e kv\n    wssk --\x3e web\n    openapi --\x3e web\n    web --\x3e storage\n    web --\x3e messages\n    vscode --\x3e openapi\n"}),(0,r.kt)("p",null,"The Development Gateway requires an Azure account and optionally a GitHub account."),(0,r.kt)("h3",{id:"provisioning"},"Provisioning"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"NOTE:"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run provision")," script will create Azure resources that will incur costs to your Azure subscription. You can clean up those resources manually via the Azure portal or with the ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run unprovision")," command."),(0,r.kt)("li",{parentName:"ul"},"You can call ",(0,r.kt)("inlineCode",{parentName:"li"},"npm run provision")," as many times as you like, it will delete the previous resources and create new ones."))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"open a terminal with the Azure CLI logged in and the default subscription configured")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"az login\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"You will need to generate a ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/settings/personal-access-tokens/new"},"Github personal access token"),"\nfor the forked repository, with ",(0,r.kt)("inlineCode",{parentName:"p"},"actions"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"secrets")," scope as ",(0,r.kt)("inlineCode",{parentName:"p"},"read+write"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"launch the provisioning script"))),(0,r.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run provision\n"))),(0,r.kt)(o.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn provision\n"))),(0,r.kt)(o.Z,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm run provision\n")))),(0,r.kt)("p",null,"After the script is done executing,\nit will take a couple minutes for the Github Actions to build the site and start it."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"open the swagger page, ",(0,r.kt)("inlineCode",{parentName:"li"},"https://WEBAPPNAME.azurewebsites.net/swagger/")," and make sure it loads")),(0,r.kt)("p",null,"You will be able to continue the configuration of the gateway through the ",(0,r.kt)("a",{parentName:"p",href:"/getting-started/vscode"},"VS Code extension"),",\n",(0,r.kt)("inlineCode",{parentName:"p"},"DeviceScript")," view, ",(0,r.kt)("inlineCode",{parentName:"p"},"Development Gateway")," section."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Empty view",src:a(45822).Z,width:"714",height:"496"})),(0,r.kt)("h3",{id:"deployment"},"Deployment"),(0,r.kt)("p",null,"The repository can be configured to deploy the site on every build on the ",(0,r.kt)("inlineCode",{parentName:"p"},"main")," brain,\nusing the ",(0,r.kt)("inlineCode",{parentName:"p"},"build.yml")," ",(0,r.kt)("a",{parentName:"p",href:"https://docs.github.com/en/actions"},"GitHub Actions"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"to enable, uncomment ",(0,r.kt)("inlineCode",{parentName:"li"},'# AZURE_WEBAPP_PUBLISH: "true"')," in ",(0,r.kt)("inlineCode",{parentName:"li"},".github/workflows/build.yml"))),(0,r.kt)("p",null,"The project ",(0,r.kt)("inlineCode",{parentName:"p"},"README.md")," file contains details for local development."),(0,r.kt)("h3",{id:"cleanup"},"Cleanup"),(0,r.kt)("p",null,"Use the Azure CLI to delete the resource group and all its associated resources."),(0,r.kt)(l.Z,{groupId:"npm2yarn",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run unprovision\n"))),(0,r.kt)(o.Z,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn unprovision\n"))),(0,r.kt)(o.Z,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm run unprovision\n")))),(0,r.kt)("h3",{id:"dashboards"},"Dashboards"),(0,r.kt)("p",null,"Out of the box, the gateway will push ",(0,r.kt)("a",{parentName:"p",href:"/developer/cloud"},"telemetry metrics")," in an Application Insights instance and in an Event Hub."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You can use the built-in dashboarding capabilities of Application Insights to visualize metrics and explore logs."),(0,r.kt)("li",{parentName:"ul"},"You can build a dashboard of metrics in an ",(0,r.kt)("a",{parentName:"li",href:"https://azure.microsoft.com/en-us/products/managed-grafana/"},"Azure Hosted Grafana")," instance.")),(0,r.kt)("h3",{id:"visual-studio-code-extension"},"Visual Studio Code extension"),(0,r.kt)("p",null,"Once the gateway is up and running, you can use the Visual Studio Code extension\nto manage devices, scripts and work with the gateway."))}k.isMDXComponent=!0},45822:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/empty-view-0f03949a953ec9208558ab31992e000c.png"}}]);